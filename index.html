<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>í¬ë¥´íˆ¬ê°ˆ 8ì¼ ì—¬í–‰</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css"/>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#101820;--card:#1a2535;--acc:#e8a838;--tx:#eae8e3;--dm:#7a8a9a;--bl:#3b82f6;--gn:#22c55e;--pp:#a855f7;--rd:#ef4444;--or:#f59e0b;--tl:#14b8a6}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%;overflow:hidden;font-family:'Noto Sans KR',sans-serif;background:var(--bg);color:var(--tx)}
.app{display:flex;flex-direction:column;height:100dvh}
.top{padding:max(env(safe-area-inset-top),8px) 16px 0;background:var(--bg);z-index:50}
.top h1{font-size:17px;font-weight:700;color:var(--acc)}
.top p{font-size:11px;color:var(--dm);margin-top:2px}
.days{display:flex;gap:6px;padding:10px 16px 8px;overflow-x:auto;scrollbar-width:none;background:var(--bg);z-index:40}
.days::-webkit-scrollbar{display:none}
.db{flex-shrink:0;padding:6px 12px;border-radius:20px;border:1px solid rgba(255,255,255,.08);background:0;color:var(--dm);font-size:12px;font-weight:600;font-family:inherit;cursor:pointer;transition:.2s;white-space:nowrap}
.db.on{background:var(--acc);color:#000;border-color:var(--acc)}
.db .c{font-size:10px;font-weight:400;opacity:.7}
.vt{display:flex;margin:0 16px 8px;border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,.08)}
.vb{flex:1;padding:7px 0;text-align:center;font-size:12px;font-weight:600;background:0;color:var(--dm);border:none;font-family:inherit;cursor:pointer;transition:.2s}
.vb.on{background:rgba(232,168,56,.15);color:var(--acc)}
.mw{flex:1;position:relative;display:none}.mw.v{display:block}
#map{width:100%;height:100%}
.lw{flex:1;overflow-y:auto;display:none;padding:0 12px calc(80px + env(safe-area-inset-bottom));-webkit-overflow-scrolling:touch}
.lw.v{display:block}
@media(min-width:768px){.vt{display:none}.ct{display:flex;flex:1;overflow:hidden}.lw{display:block!important;width:400px;min-width:400px;border-right:1px solid rgba(255,255,255,.06);padding-bottom:40px}.mw{display:block!important;flex:1}}
.dh{padding:12px 4px 8px}.dh h2{font-size:16px;font-weight:700;color:var(--acc)}.dh p{font-size:12px;color:var(--dm);line-height:1.5;margin-top:4px}
.st{display:flex;gap:10px;padding:12px 10px;border-radius:10px;cursor:pointer;transition:.15s}
.st:active,.st.on{background:#1f2f42}
.sn{width:30px;height:30px;min-width:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;color:#fff;margin-top:1px}
.sn.sight{background:var(--bl)}.sn.food{background:var(--gn)}.sn.transport-marker{background:var(--pp)}
.si{flex:1;min-width:0}
.nm{font-size:13px;font-weight:600;line-height:1.35}.ne{font-size:11px;color:var(--dm);font-weight:400}
.sm{display:flex;gap:8px;margin-top:3px;font-size:11px;color:var(--dm)}.sm .tm{color:var(--acc);font-weight:600}
.tg{display:flex;gap:4px;margin-top:5px;flex-wrap:wrap}
.tg span{font-size:10px;padding:2px 6px;border-radius:4px;font-weight:500}
.tg .rt{background:rgba(232,168,56,.12);color:var(--acc)}
.tg .pr{background:rgba(34,197,94,.12);color:var(--gn)}
.tg .cl{background:rgba(239,68,68,.12);color:var(--rd)}
.tg .wr{background:rgba(245,158,11,.12);color:var(--or)}
.nt{font-size:11px;color:var(--dm);line-height:1.55;margin-top:6px;display:none}
.st.on .nt{display:block}
.tl{display:flex;padding:0 0 0 24px;min-height:6px}.tl-b{width:2px;background:rgba(255,255,255,.06)}
.tp{display:flex;align-items:flex-start;gap:8px;padding:4px 0 4px 15px}
.ti{width:22px;height:22px;min-width:22px;border-radius:5px;display:flex;align-items:center;justify-content:center;font-size:11px}
.ti.walk{background:rgba(59,130,246,.12);color:var(--bl)}
.ti.metro{background:rgba(245,158,11,.12);color:var(--or)}
.ti.bus{background:rgba(168,85,247,.12);color:var(--pp)}
.ti.tram{background:rgba(245,158,11,.12);color:var(--or)}
.ti.train{background:rgba(20,184,166,.12);color:var(--tl)}
.tt{font-size:11px;color:var(--dm);line-height:1.45}.tt b{color:var(--tx);font-weight:600}
.lgd{position:absolute;bottom:16px;left:12px;right:12px;z-index:500;display:flex;gap:12px;justify-content:center;background:rgba(16,24,32,.9);backdrop-filter:blur(8px);border-radius:10px;padding:8px 16px;border:1px solid rgba(255,255,255,.06)}
.lgd span{display:flex;align-items:center;gap:5px;font-size:11px;color:var(--dm)}
.lgd i{width:9px;height:9px;border-radius:50%;display:inline-block}
.leaflet-container{background:var(--bg)!important}
.cm{display:flex;align-items:center;justify-content:center;border-radius:50%;color:#fff;font-weight:700;font-size:12px;box-shadow:0 2px 8px rgba(0,0,0,.4);border:2px solid #fff;width:32px;height:32px;text-align:center}
.cm.s{background:var(--bl)}.cm.f{background:var(--gn)}.cm.t{background:var(--pp)}
.leaflet-popup-content-wrapper{background:var(--card)!important;color:var(--tx)!important;border-radius:10px!important;border:1px solid rgba(255,255,255,.1)!important;box-shadow:0 4px 20px rgba(0,0,0,.5)!important}
.leaflet-popup-tip{background:var(--card)!important}
.leaflet-popup-content{font-family:'Noto Sans KR',sans-serif!important;font-size:12px!important;margin:10px 14px!important;line-height:1.5!important}
.leaflet-popup-content h3{font-size:14px;margin-bottom:4px}
.leaflet-popup-content .p2{color:var(--dm);margin-bottom:2px}
.leaflet-control-zoom a{background:var(--card)!important;color:var(--tx)!important;border-color:rgba(255,255,255,.1)!important}
</style>
</head>
<body>
<div class="app">
<div class="top"><h1>ğŸ‡µğŸ‡¹ í¬ë¥´íˆ¬ê°ˆ 8ì¼ ì—¬í–‰</h1><p>í¬ë¥´íˆ¬ 3ì¼ + ë¦¬ìŠ¤ë³¸ 5ì¼ Â· ì—¬ìœ ë¡œìš´ ë¯¸ì‹ ì—¬í–‰</p></div>
<div class="days" id="dy"></div>
<div class="vt"><button class="vb on" onclick="sv('map')" id="vm">ğŸ—º ì§€ë„</button><button class="vb" onclick="sv('list')" id="vl">ğŸ“‹ ì¼ì •</button></div>
<div class="ct">
<div class="lw" id="lw"><div id="ls"></div></div>
<div class="mw v" id="mw"><div id="map"></div>
<div class="lgd">
<span><i style="background:var(--bl)"></i>ê´€ê´‘</span>
<span><i style="background:var(--gn)"></i>ë§›ì§‘</span>
<span><i style="background:var(--pp)"></i>êµí†µ</span>
<span><i style="background:0;border:2px solid var(--acc);width:7px;height:7px;border-radius:50%"></i>ë™ì„ </span>
</div></div>
</div></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
<script>
// ===== DATA =====
var D=[
// Day 1
{day:1,title:"í¬ë¥´íˆ¬ Day 1",sub:"êµ¬ì‹œê°€ì§€ í•µì‹¬ íƒë°©",city:"í¬ë¥´íˆ¬",desc:"í¬ë¥´íˆ¬ì˜ í•µì‹¬ ëœë“œë§ˆí¬ë¥¼ ì²œì²œíˆ ê±¸ìœ¼ë©° ì²«ì¸ìƒì„ ëŠê»´ë³´ì„¸ìš”.",
stops:[
{n:1,t:"sight",kr:"ìƒë²¤íˆ¬ ê¸°ì°¨ì—­",en:"EstaÃ§Ã£o SÃ£o Bento",lat:41.145492,lng:-8.609544,tm:"10:00",dur:"30ë¶„",rt:"4.7",note:"ì•„ì¤„ë ˆì£¼ íƒ€ì¼ ë²½í™”ê°€ ì••ê¶Œ! 2ë§Œ ê°œì˜ í‘¸ë¥¸ íƒ€ì¼ì´ í¬ë¥´íˆ¬ê°ˆ ì—­ì‚¬ë¥¼ ë‹´ê³  ìˆì–´ìš”."},
{n:2,t:"sight",kr:"í¬ë¥´íˆ¬ ëŒ€ì„±ë‹¹",en:"SÃ© do Porto",lat:41.142853,lng:-8.611116,tm:"10:45",dur:"45ë¶„",rt:"4.6",pr:"â‚¬4",note:"12ì„¸ê¸° ë¡œë§ˆë„¤ìŠ¤í¬ ì„±ë‹¹. íƒ€ì›Œ ìœ„ 360ë„ ì „ë§ í›Œë¥­. ê³ ë”• íšŒë‘ ì•„ì¤„ë ˆì£¼ í•„ìˆ˜!"},
{n:3,t:"sight",kr:"ë¦¬ë² ì´ë¼ ì§€êµ¬",en:"Cais da Ribeira",lat:41.14041,lng:-8.612566,tm:"11:45",dur:"45ë¶„",rt:"4.8",note:"UNESCO ì„¸ê³„ë¬¸í™”ìœ ì‚°. ë„ìš°ë¡œ ê°•ë³€ ì‚°ì±…ê³¼ ì‚¬ì§„ ëª…ì†Œ."},
{n:4,t:"food",kr:"ğŸ½ï¸ VOLTARIA (ì ì‹¬)",en:"Petisqueira Voltaria",lat:41.1444161,lng:-8.6122994,tm:"12:45",dur:"75ë¶„",rt:"4.8",pr:"â‚¬",cl:"ìˆ˜,ì¼",note:"ê°€ì •ì‹ í¬ë¥´íˆ¬ê°ˆ ìš”ë¦¬. í”„ë€ì„¸ì§€ëƒì™€ ëŒ€êµ¬ ìš”ë¦¬ ì¶”ì²œ."},
{n:5,t:"sight",kr:"í´ë ˆë¦¬êµ¬ìŠ¤ íƒ‘",en:"Torre dos ClÃ©rigos",lat:41.1456705,lng:-8.6145977,tm:"14:30",dur:"60ë¶„",rt:"4.6",pr:"â‚¬10",note:"240ê³„ë‹¨ ì˜¬ë¼ê°€ë©´ í¬ë¥´íˆ¬ ìµœê³  ì „ë§!"},
{n:6,t:"sight",kr:"ë¦¬ë¸Œë¼ë¦¬ì•„ ë ë£¨",en:"Livraria Lello",lat:41.146905,lng:-8.614774,tm:"15:45",dur:"30ë¶„",rt:"4.0",pr:"â‚¬8",note:"ì„¸ê³„ì—ì„œ ê°€ì¥ ì•„ë¦„ë‹¤ìš´ ì„œì . ì˜¨ë¼ì¸ ì‚¬ì „ ì˜ˆì•½ í•„ìˆ˜!"},
{n:7,t:"food",kr:"ğŸ½ï¸ The Door (ì €ë…)",en:"The Door Porto",lat:41.1441961,lng:-8.616688,tm:"18:30",dur:"90ë¶„",rt:"4.8",pr:"â‚¬â‚¬",note:"í…Œì´ìŠ¤íŒ… ì½”ìŠ¤ ì¶”ì²œ. ì˜¨ë¼ì¸ ì˜ˆì•½ í•„ìˆ˜ (18ì‹œ ì˜¤í”ˆ)."}],
tr:[
{f:1,to:2,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 10ë¶„",dt:"ë‚´ë¦¬ë§‰ ê³¨ëª©ê¸¸. êµ¬ì‹œê°€ì§€ ë¶„ìœ„ê¸°."},
{f:2,to:3,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 8ë¶„",dt:"ëŒ€ì„±ë‹¹ í…Œë¼ìŠ¤ â†’ ë¦¬ë² ì´ë¼. ê¸‰ê²½ì‚¬ ê³„ë‹¨ ì£¼ì˜!"},
{f:3,to:4,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 5ë¶„",dt:"ê°•ë³€ì—ì„œ ê³¨ëª©ìœ¼ë¡œ ì˜¬ë¼ê°€ì„¸ìš”."},
{f:4,to:5,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 7ë¶„",dt:"ì‹í›„ ì†Œí™” ê²¸ ì˜¤ë¥´ë§‰. R. dos ClÃ©rigos."},
{f:5,to:6,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 2ë¶„",dt:"í´ë ˆë¦¬êµ¬ìŠ¤ íƒ‘ ë°”ë¡œ ì˜†!"},
{f:6,to:7,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 5ë¶„",dt:"Rua das Taipas ë°©í–¥."}]},
// Day 2
{day:2,title:"í¬ë¥´íˆ¬ Day 2",sub:"í¬íŠ¸ ì™€ì¸ & ê°€ì´ì•„",city:"í¬ë¥´íˆ¬",desc:"ë„ìš°ë¡œ ê°•ì„ ê±´ë„ˆ ê°€ì´ì•„ ì™€ì¸ ì…€ëŸ¬ íƒë°© í›„ ì •ì›ì—ì„œ ì„ì–‘ì„.",
stops:[
{n:1,t:"sight",kr:"ë” ë£¨ì´ìŠ¤ 1ì„¸ ë‹¤ë¦¬",en:"Ponte Dom LuÃ­s I",lat:41.139959,lng:-8.609449,tm:"10:00",dur:"30ë¶„",rt:"4.8",note:"ìƒì¸µìœ¼ë¡œ ê±¸ì–´ì„œ! í¬ë¥´íˆ¬ ìµœê³  íŒŒë…¸ë¼ë§ˆ ë·°."},
{n:2,t:"sight",kr:"Fonseca ì™€ì¸ ì…€ëŸ¬",en:"Fonseca Port Cellars",lat:41.1354472,lng:-8.614342,tm:"10:45",dur:"75ë¶„",pr:"â‚¬10~",note:"ì…€í”„ ê°€ì´ë“œ íˆ¬ì–´. 20ë…„ì‚° í† ë‹ˆ í¬íŠ¸ ì¼í’ˆ."},
{n:3,t:"sight",kr:"Niepoort ì™€ì¸ ì…€ëŸ¬",en:"Niepoort Wine Cellar",lat:41.1342013,lng:-8.618324,tm:"12:15",dur:"75ë¶„",rt:"4.8",pr:"â‚¬15~",cl:"ì¼",note:"ì†Œê·œëª¨ í”„ë¦¬ë¯¸ì—„ íˆ¬ì–´. ì‚¬ì „ ì˜ˆì•½ í•„ìˆ˜!"},
{n:4,t:"food",kr:"ğŸ½ï¸ Taberna Dos Mercadores",en:"Taberna Dos Mercadores",lat:41.1413291,lng:-8.6129202,tm:"13:45",dur:"75ë¶„",rt:"4.5",pr:"â‚¬â‚¬",cl:"ì›”",note:"ë¬¸ì–´ë°¥ ì‹œê·¸ë‹ˆì²˜! 16ì„ë¿ì´ë¼ ì¼ì°."},
{n:5,t:"sight",kr:"í¬ë¦¬ìŠ¤íƒˆ ê¶ì „ ì •ì›",en:"Jardins PalÃ¡cio de Cristal",lat:41.1482682,lng:-8.6255165,tm:"15:30",dur:"90ë¶„",rt:"4.6",pr:"ë¬´ë£Œ",note:"ê³µì‘ìƒˆ ì •ì›. ìµœê³ ì˜ ì¼ëª° í¬ì¸íŠ¸!"},
{n:6,t:"food",kr:"ğŸ½ï¸ Bota & Bira (ì €ë…)",en:"Bota & Bira",lat:41.1424129,lng:-8.6158059,tm:"19:00",dur:"90ë¶„",rt:"4.8",pr:"â‚¬â‚¬",cl:"ì›”,ì¼",note:"ìŠ¤í…Œì´í¬ ì „ë¬¸. ë¦½ì•„ì´+ë¬¸ì–´ ê°•ì¶”!"}],
tr:[
{f:1,to:2,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 15ë¶„",dt:"ë‹¤ë¦¬ ìƒì¸µ â†’ ê°€ì´ì•„. ë‚´ë¦¬ë§‰ í›„ ì…€ëŸ¬ í‘œì§€íŒ."},
{f:2,to:3,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 8ë¶„",dt:"ê°€ì´ì•„ ê°•ë³€ ì„œìª½."},
{f:3,to:4,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 20ë¶„",dt:"ë‹¤ë¦¬ í•˜ì¸µ í¬ë¥´íˆ¬ ë³µê·€. ë˜ëŠ” ì¼€ì´ë¸”ì¹´(â‚¬7)."},
{f:4,to:5,m:"bus",ic:"ğŸšŒ",tx:"ë²„ìŠ¤ 500ë²ˆ 15ë¶„",dt:"PalÃ¡cio de Cristal í•˜ì°¨. ë˜ëŠ” ë„ë³´ 25ë¶„."},
{f:5,to:6,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 15ë¶„",dt:"ì •ì›ì—ì„œ êµ¬ì‹œê°€ì§€ ë°©í–¥."}]},
// Day 3
{day:3,title:"í¬ë¥´íˆ¬ Day 3",sub:"ë³¼ì‚¬ ê¶ì „ & ë§ˆì§€ë§‰",city:"í¬ë¥´íˆ¬",desc:"ë†“ì¹œ ëª…ì†Œ í›„ í¬ë¥´íˆ¬ë¥¼ ì—¬ìœ ë¡­ê²Œ ë§ˆë¬´ë¦¬.",
stops:[
{n:1,t:"sight",kr:"ë³¼ì‚¬ ê¶ì „",en:"PalÃ¡cio da Bolsa",lat:41.1413772,lng:-8.615672,tm:"10:00",dur:"60ë¶„",rt:"4.5",pr:"â‚¬13",note:"ì•„ëì˜ ë°© ì••ê¶Œ! ê°€ì´ë“œ íˆ¬ì–´ë§Œ. ì¼ì° ê°€ì„œ ì˜ˆì•½."},
{n:2,t:"sight",kr:"ë¹„ë¥´íˆ¬ë°ìŠ¤ ê³µì›",en:"Parque das Virtudes",lat:41.1447,lng:-8.618988,tm:"11:30",dur:"45ë¶„",rt:"4.6",pr:"ë¬´ë£Œ",note:"í˜„ì§€ì¸ ìˆ¨ì€ ëª…ì†Œ. ë„ìš°ë¡œ ê°• ì „ê²½."},
{n:3,t:"food",kr:"ğŸ½ï¸ BrasÃ£o Aliados (ì ì‹¬)",en:"BrasÃ£o Aliados",lat:41.1491541,lng:-8.6117884,tm:"12:45",dur:"75ë¶„",rt:"4.6",pr:"â‚¬â‚¬",note:"í”„ë€ì„¸ì§€ëƒ ë§›ì§‘! 3/4 ì‚¬ì´ì¦ˆ 1ì¸ ì¶©ë¶„."},
{n:4,t:"food",kr:"ğŸ½ï¸ A Despensa (ì €ë…)",en:"A Despensa",lat:41.147249,lng:-8.613547,tm:"19:30",dur:"90ë¶„",rt:"4.8",pr:"â‚¬â‚¬",cl:"ì›”",note:"í¬ë¥´íˆ¬ ìµœê³  íŒŒìŠ¤íƒ€! ë¼ìëƒ ë¯¸ì‰ë¦°ê¸‰. 19ì‹œ ì˜¤í”ˆ."}],
tr:[
{f:1,to:2,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 10ë¶„",dt:"ë¦¬ë² ì´ë¼ì—ì„œ ì–¸ë• ìœ„ë¡œ."},
{f:2,to:3,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 12ë¶„",dt:"Aliados ê´‘ì¥ ë°©í–¥. ë‚´ë¦¬ë§‰."},
{f:3,to:4,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 7ë¶„",dt:"ì˜¤í›„ ììœ  í›„ ì €ë…. Santa Catarina ì‡¼í•‘ ì¶”ì²œ."}]},
// Day 4
{day:4,title:"ë¦¬ìŠ¤ë³¸ Day 1",sub:"ì•ŒíŒŒë§ˆ & ì„±",city:"ë¦¬ìŠ¤ë³¸",desc:"ë¦¬ìŠ¤ë³¸ ë„ì°©! ì•ŒíŒŒë§ˆ ê³¨ëª©ì„ ê±°ë‹ì–´ ë³´ì„¸ìš”.",
stops:[
{n:1,t:"transport-marker",kr:"ğŸš† í¬ë¥´íˆ¬â†’ë¦¬ìŠ¤ë³¸",en:"AP Train CampanhÃ£â†’S.ApolÃ³nia",lat:38.714,lng:-9.123,tm:"07:30",dur:"ì•½ 3ì‹œê°„",pr:"â‚¬25~35",note:"CampanhÃ£ì—­ APê³ ì†ì—´ì°¨. cp.pt ì‚¬ì „ ì˜ˆë§¤ ì¶”ì²œ."},
{n:2,t:"sight",kr:"ë¦¬ìŠ¤ë³¸ ëŒ€ì„±ë‹¹",en:"SÃ© de Lisboa",lat:38.709834,lng:-9.132954,tm:"11:30",dur:"45ë¶„",rt:"4.4",pr:"ë¬´ë£Œ",note:"1147ë…„ ë¦¬ìŠ¤ë³¸ ìµœê³ (æœ€å¤) ì„±ë‹¹."},
{n:3,t:"sight",kr:"ìƒ ì¡°ë¥´ì œ ì„±",en:"Castelo de SÃ£o Jorge",lat:38.713909,lng:-9.133476,tm:"12:30",dur:"90ë¶„",rt:"4.5",pr:"â‚¬15",note:"ë¦¬ìŠ¤ë³¸ ìµœê³  íŒŒë…¸ë¼ë§ˆ! Lisboa Card ë¬´ë£Œ."},
{n:4,t:"food",kr:"ğŸ½ï¸ Taberna Sal Grosso",en:"Taberna Sal Grosso",lat:38.7136987,lng:-9.1244447,tm:"14:15",dur:"75ë¶„",rt:"4.7",pr:"â‚¬",note:"ì•ŒíŒŒë§ˆ ìˆ¨ì€ ë§›ì§‘. ë¬¸ì–´+ê³ êµ¬ë§ˆë§¤ì‹œ ê°•ì¶”!"},
{n:5,t:"transport-marker",kr:"ğŸšƒ íŠ¸ë¨ 28ë²ˆ ì²´í—˜",en:"Tram 28 Martim Moniz",lat:38.7152423,lng:-9.136078,tm:"16:00",dur:"60ë¶„",pr:"â‚¬1.90",note:"Martim Moniz ì¶œë°œ = ì¢Œì„ í™•ë³´!"},
{n:6,t:"food",kr:"ğŸ½ï¸ A Nossa Casa (ì €ë…)",en:"A Nossa Casa",lat:38.7118452,lng:-9.1449444,tm:"19:00",dur:"90ë¶„",rt:"4.8",pr:"â‚¬â‚¬",note:"24ì„ ì†Œê·œëª¨. íƒ€ë¥´íƒ€ë¥´+ë¬¸ì–´ í™˜ìƒ! ì˜ˆì•½ í•„ìˆ˜."}],
tr:[
{f:1,to:2,m:"metro",ic:"ğŸš‡",tx:"ë©”íŠ¸ë¡œ+ë„ë³´ 20ë¶„",dt:"S.ApolÃ³nia Blueâ†’Terreiro do PaÃ§o, ë„ë³´ 10ë¶„."},
{f:2,to:3,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 10ë¶„",dt:"ê°€íŒŒë¥¸ ì˜¤ë¥´ë§‰! ë¬¼ ì±™ê¸°ì„¸ìš”."},
{f:3,to:4,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 15ë¶„",dt:"ì„±ì—ì„œ ì•ŒíŒŒë§ˆ ê³¨ëª© ë”°ë¼."},
{f:4,to:5,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 15ë¶„",dt:"Martim Moniz ê´‘ì¥ìœ¼ë¡œ."},
{f:5,to:6,m:"tram",ic:"ğŸšƒ",tx:"íŠ¸ë¨28+ë„ë³´",dt:"Bairro Alto í•˜ì°¨ í›„ ë„ë³´ 5ë¶„."}]},
// Day 5
{day:5,title:"ë¦¬ìŠ¤ë³¸ Day 2",sub:"ë²¨ë  ì§€êµ¬",city:"ë¦¬ìŠ¤ë³¸",desc:"ëŒ€í•­í•´ì‹œëŒ€ì˜ ì˜ê´‘. ì—ê·¸íƒ€ë¥´íŠ¸ ìŠì§€ ë§ˆì„¸ìš”!",
stops:[
{n:1,t:"food",kr:"ğŸ½ï¸ íŒŒìŠ¤í…Œì´ìŠ¤ ë“œ ë²¨ë ",en:"PastÃ©is de BelÃ©m",lat:38.6975105,lng:-9.203228,tm:"09:00",dur:"45ë¶„",rt:"4.6",pr:"â‚¬",note:"ì›ì¡° ì—ê·¸íƒ€ë¥´íŠ¸! ì•„ì¹¨ì— ì¤„ ì§§ì•„ìš”."},
{n:2,t:"sight",kr:"ì œë¡œë‹ˆë¬´ìŠ¤ ìˆ˜ë„ì›",en:"Mosteiro dos JerÃ³nimos",lat:38.6978909,lng:-9.206704,tm:"10:00",dur:"90ë¶„",rt:"4.5",pr:"â‚¬10",cl:"ì›”",note:"ë§ˆëˆ„ì—˜ ì–‘ì‹ ê±¸ì‘! ì˜¨ë¼ì¸ ì˜ˆì•½ ê°•ì¶”."},
{n:3,t:"sight",kr:"ë²¨ë  íƒ‘ (ì™¸ê´€)",en:"Torre de BelÃ©m",lat:38.691584,lng:-9.215977,tm:"12:00",dur:"30ë¶„",rt:"4.5",wr:"2026 ì¤‘ë°˜ ê³µì‚¬ì¤‘",note:"âš ï¸ ë³´ìˆ˜ ê³µì‚¬ ì¤‘! ì™¸ê´€+ê°•ë³€ ì‚°ì±…ì€ OK."},
{n:4,t:"food",kr:"ğŸ½ï¸ Time Out Market",en:"Time Out Market Lisboa",lat:38.7070608,lng:-9.1456691,tm:"13:30",dur:"75ë¶„",rt:"4.4",pr:"â‚¬â‚¬~â‚¬â‚¬â‚¬",note:"ë‹¤ì–‘í•œ í¬ë¥´íˆ¬ê°ˆ ìŒì‹ í•œê³³ì—ì„œ!"},
{n:5,t:"sight",kr:"ì½”ë©”ë¥´ì‹œìš° ê´‘ì¥",en:"PraÃ§a do ComÃ©rcio",lat:38.7072828,lng:-9.136361,tm:"15:30",dur:"45ë¶„",rt:"4.7",pr:"ë¬´ë£Œ",note:"íƒ€êµ¬ìŠ¤ ê°•ë³€ ì›…ì¥í•œ ê´‘ì¥. ì„ì–‘!"}],
tr:[
{f:0,to:1,m:"tram",ic:"ğŸšƒ",tx:"íŠ¸ë¨15E/ë²„ìŠ¤728",dt:"ì‹œë‚´â†’ë²¨ë  ì•½ 30ë¶„."},
{f:1,to:2,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 3ë¶„",dt:"ë°”ë¡œ ì˜†!"},
{f:2,to:3,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 15ë¶„",dt:"ê°•ë³€ ì„œìª½. ë°œê²¬ê¸°ë…ë¹„ ê²½ìœ ."},
{f:3,to:4,m:"tram",ic:"ğŸšƒ",tx:"íŠ¸ë¨15E ì•½ 25ë¶„",dt:"ë²¨ë â†’Cais do SodrÃ©. ì—­ ì˜†."},
{f:4,to:5,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 15ë¶„",dt:"ê°•ë³€ ë™ìª½ìœ¼ë¡œ."}]},
// Day 6
{day:6,title:"ë¦¬ìŠ¤ë³¸ Day 3",sub:"ì‹ íŠ¸ë¼ ë‹¹ì¼ì¹˜ê¸°",city:"ì‹ íŠ¸ë¼",desc:"ë™í™” ì† ê¶ì „! ë¦¬ìŠ¤ë³¸ì—ì„œ ê¸°ì°¨ 40ë¶„.",
stops:[
{n:1,t:"transport-marker",kr:"ğŸš† ë¦¬ìŠ¤ë³¸â†’ì‹ íŠ¸ë¼",en:"Rossioâ†’Sintra ê¸°ì°¨",lat:38.798,lng:-9.381,tm:"08:30",dur:"40ë¶„",pr:"â‚¬2.30",note:"Rossioì—­ ì¶œë°œ. 15~30ë¶„ ê°„ê²©."},
{n:2,t:"sight",kr:"í˜ë‚˜ ê¶ì „",en:"PalÃ¡cio Nacional da Pena",lat:38.7875851,lng:-9.3906089,tm:"10:00",dur:"150ë¶„",rt:"4.4",pr:"â‚¬14~20",note:"ì˜¨ë¼ì¸ ì˜ˆì•½ í•„ìˆ˜. í¸í•œ ì‹ ë°œ!"},
{n:3,t:"transport-marker",kr:"ğŸš† ì‹ íŠ¸ë¼â†’ë¦¬ìŠ¤ë³¸",en:"Sintraâ†’Rossio ê¸°ì°¨",lat:38.7978,lng:-9.3785,tm:"15:00",dur:"40ë¶„",pr:"â‚¬2.30",note:"ì—¬ìœ ë¡­ê²Œ ë³µê·€."}],
tr:[
{f:1,to:2,m:"bus",ic:"ğŸšŒ",tx:"ë²„ìŠ¤ 434ë²ˆ ~20ë¶„",dt:"ì‹ íŠ¸ë¼ì—­ ì• íƒ‘ìŠ¹. ì™•ë³µ í‹°ì¼“."},
{f:2,to:3,m:"bus",ic:"ğŸšŒ",tx:"ë²„ìŠ¤ 434ë²ˆ ~20ë¶„",dt:"ê¶ì „â†’ì‹ íŠ¸ë¼ì—­."}]},
// Day 7
{day:7,title:"ë¦¬ìŠ¤ë³¸ Day 4",sub:"ë°”ì´ìƒ¤ & ì‹œì•„ë‘",city:"ë¦¬ìŠ¤ë³¸",desc:"ë¦¬ìŠ¤ë³¸ ì¤‘ì‹¬ë¶€ ì‡¼í•‘ê³¼ ë¬¸í™”ë¥¼ ì—¬ìœ ë¡­ê²Œ.",
stops:[
{n:1,t:"sight",kr:"ì¹´ë¥´ë¬´ ê³ ê³ í•™ ë°•ë¬¼ê´€",en:"Museu ArqueolÃ³gico do Carmo",lat:38.712038,lng:-9.140613,tm:"10:30",dur:"60ë¶„",rt:"4.5",pr:"â‚¬5",cl:"ì¼",note:"1755ë…„ ëŒ€ì§€ì§„ ê³ ë”• ìˆ˜ë„ì›. ì§€ë¶• ì—†ëŠ” ì„±ë‹¹!"},
{n:2,t:"food",kr:"ğŸ½ï¸ Lisbon Tu e Eu",en:"Lisboa Tu & Eu",lat:38.710951,lng:-9.130052,tm:"12:30",dur:"75ë¶„",rt:"4.5",pr:"â‚¬",note:"ê°€ì„±ë¹„ ë¡œì»¬ ë§›ì§‘. ì˜¤ì§•ì–´+ê°ì, ìƒê·¸ë¦¬ì•„."},
{n:3,t:"food",kr:"ğŸ½ï¸ Cervejaria Ramiro",en:"Cervejaria Ramiro",lat:38.720257,lng:-9.135743,tm:"19:00",dur:"90ë¶„",rt:"4.4",pr:"â‚¬â‚¬â‚¬",cl:"ì›”",note:"ë¦¬ìŠ¤ë³¸ ìµœê³  í•´ì‚°ë¬¼! íƒ€ì´ê±°ìƒˆìš°, ë§ˆëŠ˜ê²Œ í•„ìˆ˜."}],
tr:[
{f:1,to:2,m:"walk",ic:"ğŸš¶",tx:"ë„ë³´ 15ë¶„",dt:"ì‹œì•„ë‘â†’Baixa ì‡¼í•‘ê±°ë¦¬ ê²½ìœ ."},
{f:2,to:3,m:"metro",ic:"ğŸš‡",tx:"ë©”íŠ¸ë¡œ Green 10ë¶„",dt:"Baixa-Chiadoâ†’Intendente, ë„ë³´ 5ë¶„."}]},
// Day 8
{day:8,title:"ë¦¬ìŠ¤ë³¸ Day 5",sub:"ìˆ˜ì¡±ê´€ & ë§ˆì§€ë§‰ ë¯¸ì‹",city:"ë¦¬ìŠ¤ë³¸",desc:"ìœ ëŸ½ ìµœëŒ€ ìˆ˜ì¡±ê´€ í›„ ìµœê³ ì˜ ì‹ì‚¬ë¡œ í”¼ë‚ ë ˆ!",
stops:[
{n:1,t:"sight",kr:"ë¦¬ìŠ¤ë³¸ ì˜¤ì„¸ì•„ë‚˜ë¦¬ì›€",en:"OceanÃ¡rio de Lisboa",lat:38.7635435,lng:-9.0937415,tm:"10:00",dur:"180ë¶„",rt:"4.7",pr:"â‚¬25~29",note:"ìœ ëŸ½ ìµœëŒ€ ìˆ˜ì¡±ê´€! í•´ë‹¬+í•´íŒŒë¦¬ê´€ 3~4ì‹œê°„."},
{n:2,t:"food",kr:"ğŸ½ï¸ Augusto Lisboa",en:"Augusto Lisboa",lat:38.714425,lng:-9.130207,tm:"14:30",dur:"75ë¶„",rt:"4.8",pr:"â‚¬â‚¬",note:"íŠ¸ë Œë”” ë¸ŒëŸ°ì¹˜. ìŠ¤í¬ë¨ë¸”ì—ê·¸, íŒ¬ì¼€ì´í¬ ê°•ì¶”."},
{n:3,t:"food",kr:"ğŸ½ï¸ Copo de Mar (í”¼ë‚ ë ˆ)",en:"Copo de Mar",lat:38.739801,lng:-9.149103,tm:"19:30",dur:"90ë¶„",rt:"4.8",pr:"â‚¬â‚¬",cl:"ì¼",note:"ì—¬í–‰ í”¼ë‚ ë ˆ! ëŒ€êµ¬Â·ë¬¸ì–´ í™˜ìƒ. ì˜ˆì•½ í•„ìˆ˜!"}],
tr:[
{f:0,to:1,m:"metro",ic:"ğŸš‡",tx:"ë©”íŠ¸ë¡œ Red Line",dt:"Orienteì—­ í•˜ì°¨, ë„ë³´ 10ë¶„."},
{f:1,to:2,m:"metro",ic:"ğŸš‡",tx:"ë©”íŠ¸ë¡œ ì•½ 25ë¶„",dt:"Orienteâ†’Alameda í™˜ìŠ¹â†’Greenâ†’Baixa-Chiado."},
{f:2,to:3,m:"metro",ic:"ğŸš‡",tx:"ë©”íŠ¸ë¡œ+ë„ë³´ 20ë¶„",dt:"Baixa-Chiadoâ†’SÃ£o SebastiÃ£o. ë˜ëŠ” íƒì‹œ â‚¬5."}]}
];

// ===== STATE =====
var cur=0, sel=null, mp, mks=[], pl, extras=[];

// ===== RENDER DAYS =====
function rd(){
  document.getElementById('dy').innerHTML=D.map(function(d,i){
    return '<button class="db'+(i===cur?' on':'')+'" onclick="pd('+i+')">D'+d.day+' <span class="c">'+d.city+'</span></button>';
  }).join('');
}

// ===== RENDER LIST =====
function rl(){
  var d=D[cur], h='<div class="dh"><h2>'+d.title+' â€” '+d.sub+'</h2><p>'+d.desc+'</p></div>';
  d.stops.forEach(function(x,i){
    if(i>0){
      var tr=null;
      for(var j=0;j<d.tr.length;j++){if(d.tr[j].to===x.n){tr=d.tr[j];break;}}
      if(tr){
        h+='<div class="tl"><div class="tl-b"></div></div>';
        h+='<div class="tp"><div class="ti '+tr.m+'">'+tr.ic+'</div><div class="tt"><b>'+tr.tx+'</b><br>'+tr.dt+'</div></div>';
        h+='<div class="tl"><div class="tl-b"></div></div>';
      }
    }
    var ac=sel===i?' on':'';
    h+='<div class="st'+ac+'" onclick="ps('+i+')" id="s'+i+'">';
    h+='<div class="sn '+x.t+'">'+x.n+'</div>';
    h+='<div class="si">';
    h+='<div class="nm">'+x.kr+'<br><span class="ne">'+x.en+'</span></div>';
    h+='<div class="sm"><span class="tm">'+x.tm+'</span><span>'+x.dur+'</span></div>';
    h+='<div class="tg">';
    if(x.rt) h+='<span class="rt">â˜… '+x.rt+'</span>';
    if(x.pr) h+='<span class="pr">'+x.pr+'</span>';
    if(x.cl) h+='<span class="cl">íœ´ë¬´ '+x.cl+'</span>';
    if(x.wr) h+='<span class="wr">âš  '+x.wr+'</span>';
    h+='</div>';
    h+='<div class="nt">'+(x.note||'')+'</div>';
    h+='</div></div>';
  });
  document.getElementById('ls').innerHTML=h;
}

// ===== ACTIONS =====
function pd(i){cur=i;sel=null;rd();rl();um();}
function ps(i){
  sel=sel===i?null:i; rl();
  if(sel!==null){
    var x=D[cur].stops[sel];
    mp.flyTo([x.lat,x.lng],16,{duration:0.5});
    if(mks[sel]) mks[sel].openPopup();
    var el=document.getElementById('s'+sel);
    if(el) el.scrollIntoView({behavior:'smooth',block:'center'});
  }
}
function sv(v){
  var mw=document.getElementById('mw'),lw=document.getElementById('lw');
  var vm=document.getElementById('vm'),vl=document.getElementById('vl');
  if(v==='map'){mw.classList.add('v');lw.classList.remove('v');vm.classList.add('on');vl.classList.remove('on');}
  else{lw.classList.add('v');mw.classList.remove('v');vl.classList.add('on');vm.classList.remove('on');}
  if(v==='map') setTimeout(function(){mp.invalidateSize();},100);
}

// ===== MAP =====
function initMap(){
  mp=L.map('map',{zoomControl:true,attributionControl:false}).setView([41.145,-8.612],14);
  L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',{maxZoom:19,subdomains:'abcd'}).addTo(mp);
  um();
}

function mc(t){return t==='food'?'f':t==='transport-marker'?'t':'s';}

function um(){
  mks.forEach(function(m){mp.removeLayer(m);});
  mks=[];
  extras.forEach(function(m){mp.removeLayer(m);});
  extras=[];
  if(pl) mp.removeLayer(pl);

  var d=D[cur], pts=[];
  d.stops.forEach(function(x,i){
    pts.push([x.lat,x.lng]);
    var icon=L.divIcon({className:'',html:'<div class="cm '+mc(x.t)+'">'+x.n+'</div>',iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-18]});
    var mk=L.marker([x.lat,x.lng],{icon:icon}).addTo(mp);
    var pop='<h3>'+x.kr+'</h3><p class="p2">'+x.en+'</p><p><b>'+x.tm+'</b> Â· '+x.dur+'</p>';
    if(x.rt) pop+='<p>â˜… '+x.rt+'</p>';
    if(x.note) pop+='<p>'+x.note+'</p>';
    mk.bindPopup(pop);
    mk.on('click',function(){sel=i;rl();var el=document.getElementById('s'+i);if(el)el.scrollIntoView({behavior:'smooth',block:'center'});});
    mks.push(mk);
  });

  pl=L.polyline(pts,{color:'#e8a838',weight:3,opacity:0.7,dashArray:'8,8'}).addTo(mp);

  for(var i=0;i<pts.length-1;i++){
    var mid=[(pts[i][0]+pts[i+1][0])/2,(pts[i][1]+pts[i+1][1])/2];
    var dy=pts[i+1][0]-pts[i][0], dx=pts[i+1][1]-pts[i][1];
    var angle=Math.atan2(dx,dy)*180/Math.PI;
    var arr=L.divIcon({className:'',html:'<div style="color:#e8a838;font-size:12px;transform:rotate('+(180-angle)+'deg);line-height:1">â–²</div>',iconSize:[12,12],iconAnchor:[6,6]});
    var am=L.marker(mid,{icon:arr,interactive:false}).addTo(mp);
    extras.push(am);
  }

  if(pts.length>0) mp.fitBounds(pts,{padding:[40,40],maxZoom:15});
}

// ===== INIT =====
rd(); rl(); initMap();
window.addEventListener('resize',function(){mp.invalidateSize();});
</script>
</body>
</html>
